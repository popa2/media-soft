# Описание мобильного приложения «Список покупок в магазинах»

## 1. Бизнес-логика приложения

Приложение представляет собой мобильный клиент-серверный сервис для создания, редактирования и ведения списка покупок. Пользователи могут добавлять товары, отмечать их как купленные и синхронизировать данные между устройствами.

### Основные сущности:

- **Пользователь** – зарегистрированный пользователь приложения.
- **Список покупок** – совокупность товаров, связанных с пользователем.
- **Товар** – элемент списка покупок.
- **Сервер** – центральное хранилище данных и API для синхронизации.

## 2. Основные функции приложения

| Функция                    | Описание                                               |
| -------------------------- | ------------------------------------------------------ |
| 1. Авторизация             | Регистрация и вход в систему.                          |
| 2. Создание списка покупок | Пользователь может создать новый список.               |
| 3. Добавление товаров      | Возможность добавлять товары в список.                 |
| 4. Отметка о покупке       | Товар можно пометить как купленный.                    |
| 5. Редактирование списка   | Изменение названия, удаление товаров.                  |
| 6. Синхронизация данных    | Автоматическое обновление между клиентом и сервером.   |
| 7. Шеринг списка           | Возможность делиться списком с другими пользователями. |

## 3. Процесс синхронизации данных

- **Создание списка** – пользователь отправляет запрос на сервер (`POST /lists`).
- **Добавление товаров** – (`POST /lists/{list_id}/items`).
- **Редактирование списка** – (`PUT /lists/{list_id}`).
- **Отметка о покупке** – (`PATCH /lists/{list_id}/items/{item_id}`).
- **Удаление товара** – (`DELETE /lists/{list_id}/items/{item_id}`).

## 4. Прототип экрана «Покупка товара»

![Image alt](https://github.com/popa2/media-soft/blob/main/prototype.jpg)


### Описание UI:

- Список товаров с чекбоксами.
- Кнопка «Добавить товар».
- Возможность отметить товар как купленный.

## 5. Подробное описание функции покупки товара

- Пользователь выбирает товар и отмечает его как купленный.
- Запрос: `PATCH /lists/{list_id}/items/{item_id}` с параметром `status: purchased`.
- Ответ сервера: `200 OK`.

### ER-диаграмма

![Image alt](https://github.com/popa2/media-soft/blob/main/diogramma.jpg)

## 6. Основные сложности и вопросы

- Как обрабатывать конфликты при одновременном редактировании?
- Требуется ли интеграция с внешними сервисами?

---

## SQL-запросы

### 1. Общая стоимость книг для каждого автора

```sql
SELECT a.Name, SUM(b.Price) AS TotalCost
FROM Books b
JOIN Authors a ON b.AuthorId = a.Id
GROUP BY a.Name
ORDER BY TotalCost DESC;
```

### 2. Авторы, у которых стоимость книг превышает 1500

```sql
SELECT a.Name, SUM(b.Price) AS TotalCost
FROM Books b
JOIN Authors a ON b.AuthorId = a.Id
GROUP BY a.Name
HAVING TotalCost > 1500;
```

### 3. Количество книг у каждого автора

```sql
SELECT a.Name, COUNT(b.Id) AS BookCount
FROM Authors a
LEFT JOIN Books b ON b.AuthorId = a.Id
GROUP BY a.Name;
```

### 4. Авторы без книг

```sql
SELECT a.Name
FROM Authors a
LEFT JOIN Books b ON b.AuthorId = a.Id
WHERE b.Id IS NULL;
```

